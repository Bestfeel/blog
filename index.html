<!DOCTYPE HTML>
<html>

<head>
  <meta charset="utf-8">

  <title>Feel&#39;s blog</title>
  <meta name="author" content="feel">

  <meta name="description" content="feel&#39;s blog | java | scala | python | javascript| linux | nodejs| Machine Learning">


  <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1">


  <meta property="og:site_name" content="Feel&#39;s blog">


  <meta property="og:image" content="undefined">


  <link rel="icon" type="image/x-icon" href="/favicon.ico">
  <link rel="alternate" href="/atom.xml" title="Feel&#39;s blog" type="application/atom+xml">
  <link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">
  <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->

</head>

</html>

<body>
  <header id="header" class="inner">
    <div class="alignleft">
      <h1><a href="/">Feel&#39;s blog</a></h1>
      <h2><a href="/">知识从未如此性感</a></h2>
    </div>
    <nav id="main-nav" class="alignright">
      <ul>

        <li><a href="/">首页</a></li>

        <li><a href="/archives">归档</a></li>

        <li><a href="/site">下载</a></li>

        <li><a href="/about">关于</a></li>

        <li><a href="http://download.feel88.cn">新版下载中心</a></li>
      </ul>



      <div class="clearfix"></div>
    </nav>
    <div class="clearfix"></div>
  </header>
  <div id="content" class="inner">
    <div id="main-col" class="alignleft">
      <div id="wrapper">
        <article class="post">

          <div class="post-content">
            <header>

              <div class="icon"></div>
              <time datetime="2016-04-03T15:52:26.000Z"><a href="/2016/04/03/CGlib实现动态代理/">2016-04-03</a></time>

              <h1 class="title"><a href="/2016/04/03/CGlib实现动态代理/">CGlib 实现动态代理</a></h1>
            </header>
            <div class="entry">

              <p>&#x4EE3;&#x7406;&#x6A21;&#x5F0F;&#x662F;&#x5E38;&#x7528;&#x7684; java &#x8BBE;&#x8BA1;&#x6A21;&#x5F0F;&#xFF0C;&#x4ED6;&#x7684;&#x7279;&#x5F81;&#x662F;&#x4EE3;&#x7406;&#x7C7B;&#x4E0E;&#x59D4;&#x6258;&#x7C7B;&#x6709;&#x540C;&#x6837;&#x7684;&#x63A5;&#x53E3;&#xFF0C;&#x4EE3;&#x7406;&#x7C7B;&#x4E3B;&#x8981;&#x8D1F;&#x8D23;&#x4E3A;&#x59D4;&#x6258;&#x7C7B;&#x9884;&#x5904;&#x7406;&#x6D88;&#x606F;&#x3001;&#x8FC7;&#x6EE4;&#x6D88;&#x606F;&#x3001;&#x628A;&#x6D88;&#x606F;&#x8F6C;&#x53D1;&#x7ED9;&#x59D4;&#x6258;&#x7C7B;&#xFF0C;&#x4EE5;&#x53CA;&#x4E8B;&#x540E;&#x5904;&#x7406;&#x6D88;&#x606F;&#x7B49;&#x3002;&#x4EE3;&#x7406;&#x7C7B;&#x4E0E;&#x59D4;&#x6258;&#x7C7B;&#x4E4B;&#x95F4;&#x901A;&#x5E38;&#x4F1A;&#x5B58;&#x5728;&#x5173;&#x8054;&#x5173;&#x7CFB;&#xFF0C;&#x4E00;&#x4E2A;&#x4EE3;&#x7406;&#x7C7B;&#x7684;&#x5BF9;&#x8C61;&#x4E0E;&#x4E00;&#x4E2A;&#x59D4;&#x6258;&#x7C7B;&#x7684;&#x5BF9;&#x8C61;&#x5173;&#x8054;&#xFF0C;&#x4EE3;&#x7406;&#x7C7B;&#x7684;&#x5BF9;&#x8C61;&#x672C;&#x8EAB;&#x5E76;&#x4E0D;&#x771F;&#x6B63;&#x5B9E;&#x73B0;&#x670D;&#x52A1;&#xFF0C;&#x800C;&#x662F;&#x901A;&#x8FC7;&#x8C03;&#x7528;&#x59D4;&#x6258;&#x7C7B;&#x7684;&#x5BF9;&#x8C61;&#x7684;&#x76F8;&#x5173;&#x65B9;&#x6CD5;&#xFF0C;&#x6765;&#x63D0;&#x4F9B;&#x7279;&#x5B9A;&#x7684;&#x670D;&#x52A1;&#x3002;
                &#x6309;&#x7167;&#x4EE3;&#x7406;&#x7684;&#x521B;&#x5EFA;&#x65F6;&#x671F;&#xFF0C;&#x4EE3;&#x7406;&#x7C7B;&#x53EF;&#x4EE5;&#x5206;&#x4E3A;&#x4E24;&#x79CD;&#xFF1A;
              </p>
              <p>&#x9759;&#x6001;&#x4EE3;&#x7406;&#xFF1A;&#x7531;&#x7A0B;&#x5E8F;&#x5458;&#x521B;&#x5EFA;&#x6216;&#x7279;&#x5B9A;&#x5DE5;&#x5177;&#x81EA;&#x52A8;&#x751F;&#x6210;&#x6E90;&#x4EE3;&#x7801;&#xFF0C;&#x518D;&#x5BF9;&#x5176;&#x7F16;&#x8BD1;&#x3002;&#x5728;&#x7A0B;&#x5E8F;&#x8FD0;&#x884C;&#x524D;&#xFF0C;&#x4EE3;&#x7406;&#x7C7B;&#x7684;.class
                &#x6587;&#x4EF6;&#x5C31;&#x5DF2;&#x7ECF;&#x5B58;&#x5728;&#x4E86;&#xFF1B; &#x52A8;&#x6001;&#x4EE3;&#x7406;&#xFF1A;&#x5728;&#x7A0B;&#x5E8F;&#x8FD0;&#x884C;&#x65F6;&#xFF0C;&#x8FD0;&#x7528;&#x53CD;&#x5C04;&#x673A;&#x5236;&#x52A8;&#x6001;&#x521B;&#x5EFA;&#x800C;&#x6210;&#x3002;
              </p>
              <p>&lt;!--more--&gt;</p>
              <h2 id="jdk-&#x7684;&#x52A8;&#x6001;&#x4EE3;&#x7406;&#x521B;&#x5EFA;&#x673A;&#x5236;-&#x901A;&#x8FC7;&#x63A5;&#x53E3;">JDK &#x7684;&#x52A8;&#x6001;&#x4EE3;&#x7406;&#x521B;&#x5EFA;&#x673A;&#x5236; ---- &#x901A;&#x8FC7;&#x63A5;&#x53E3;</h2>
              <p>&#x4F7F;&#x7528; JDK &#x5B9E;&#x73B0;&#x52A8;&#x6001;&#x4EE3;&#x7406;&#xFF0C;JDK &#x7684;&#x52A8;&#x6001;&#x4EE3;&#x7406;&#x53EA;&#x80FD;&#x5BF9;&#x5B9E;&#x73B0;&#x4E86;&#x63A5;&#x53E3;&#x7684;&#x7C7B;&#x8FDB;&#x884C;&#x4EE3;&#x7406;, &#x88AB;&#x4EE3;&#x7406;&#x7684;&#x5BF9;&#x8C61;&#x5FC5;&#x987B;&#x8981;&#x5B9E;&#x73B0;&#x63A5;&#x53E3;&#x3002;&#x770B;&#x4E0B;&#x9762;&#x7684;&#x6848;&#x4F8B;&#x3002;</p>
              <p>
                <figure class="highlight java">
                  <table>
                    <tr>
                      <td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td>
                      <td class="code"><pre><span class="line"><span class="keyword">package</span> com.gizwits.bean;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">IPerson</span> </span>{</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">eat</span><span class="params">()</span></span>;</span><br><span class="line">}</span><br></pre></td>
                    </tr>
                  </table>
                </figure>
              </p>
              <p>
                <figure class="highlight java">
                  <table>
                    <tr>
                      <td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td>
                      <td class="code"><pre><span class="line"><span class="keyword">package</span> com.gizwits.bean;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Person</span> <span class="keyword">implements</span> <span class="title">IPerson</span> </span>{</span><br><span class="line"></span><br><span class="line">    <span class="annotation">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">eat</span><span class="params">()</span> </span>{</span><br><span class="line">        System.out.println(<span class="string">&quot;&#x4EBA;&#x8981;&#x5403;&#x996D;!!&quot;</span>);</span><br><span class="line"></span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td>
                    </tr>
                  </table>
                </figure>
              </p>
              <p>
                <figure class="highlight nimrod">
                  <table>
                    <tr>
                      <td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td>
                      <td class="code"><pre><span class="line">package com.gizwits.proxy;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.gizwits.bean.<span class="type">Person</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.<span class="type">InvocationHandler</span>;</span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.<span class="type">Method</span>;</span><br><span class="line"></span><br><span class="line">public class <span class="type">PersonInvocationHandler</span> implements <span class="type">InvocationHandler</span> {</span><br><span class="line"></span><br><span class="line">    private <span class="type">Person</span> person;</span><br><span class="line"></span><br><span class="line">    public <span class="type">PersonInvocationHandler</span>(<span class="type">Person</span> person) {</span><br><span class="line">        this.person = person;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    @<span class="type">Override</span></span><br><span class="line">    public <span class="type">Object</span> invoke(<span class="type">Object</span> proxy, <span class="type">Method</span> <span class="keyword">method</span>, <span class="type">Object</span>[] args) throws <span class="type">Throwable</span> {</span><br><span class="line"></span><br><span class="line">        <span class="type">System</span>.<span class="keyword">out</span>.println(<span class="string">&quot;&#x4EBA;&#x5403;&#x996D;&#x4E4B;&#x524D;&#x8981;&#x6D17;&#x624B;.....&quot;</span>);</span><br><span class="line">        <span class="type">Object</span> invoke = <span class="keyword">method</span>.invoke(person, args);</span><br><span class="line"></span><br><span class="line">        <span class="type">System</span>.<span class="keyword">out</span>.println(<span class="string">&quot;&#x4EBA;&#x5403;&#x996D;&#x4E4B;&#x540E;&#x8981;&#x6D17;&#x7897;...&quot;</span>);</span><br><span class="line">        //   &#x8FD9;&#x91CC;&#x53EF;&#x4EE5;&#x6CA1;&#x6709;&#x8FD4;&#x56DE;&#x503C;, &#x5177;&#x4F53;&#x770B;&#x65B9;&#x6CD5;&#x662F;&#x5426;&#x9700;&#x8981;&#x8FD4;&#x56DE;&#x503C;.</span><br><span class="line">        <span class="keyword">return</span> invoke;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td>
                    </tr>
                  </table>
                </figure>
              </p>
              <p>
                <figure class="highlight javascript">
                  <table>
                    <tr>
                      <td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td>
                      <td class="code"><pre><span class="line">package com.gizwits.proxy;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.gizwits.bean.IPerson;</span><br><span class="line"><span class="keyword">import</span> com.gizwits.bean.Person;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.Proxy;</span><br><span class="line"></span><br><span class="line"> <span class="comment">/*</span><br><span class="line"> *</span><br><span class="line"> * &#x4F7F;&#x7528; jdk &#x539F;&#x751F;&#x7684;&#x65B9;&#x5F0F;&#x5B9E;&#x73B0;&#x52A8;&#x6001;&#x4EE3;&#x7406;</span><br><span class="line"> */</span></span><br><span class="line">public <span class="class"><span class="keyword">class</span> <span class="title">JDKPorxy</span> </span>{</span><br><span class="line"></span><br><span class="line">    public static <span class="keyword">void</span> main(<span class="built_in">String</span>[] args) {</span><br><span class="line"></span><br><span class="line">        Person p = <span class="keyword">new</span> Person();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//   &#x8FD9;&#x91CC;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x52A8;&#x6001;&#x4EE3;&#x7406;&#x7C7B;. &#x4EBA;&#x8981;&#x5403;&#x996D;&#x4E4B;&#x524D;&#x8981; &#x6D17;&#x624B;, &#x5403;&#x996D;&#x4E4B;&#x540E;&#x8FD8;&#x6709;&#x6D17;&#x7897;.</span></span><br><span class="line">        <span class="built_in">Object</span> o = <span class="built_in">Proxy</span>.newProxyInstance(p.getClass().getClassLoader(), p.getClass().getInterfaces(), <span class="keyword">new</span> PersonInvocationHandler(p));</span><br><span class="line"></span><br><span class="line">        <span class="comment">// &#x5FC5;&#x987B;&#x4F7F;&#x7528;&#x63A5;&#x53E3;</span></span><br><span class="line">        IPerson person = (IPerson) o;</span><br><span class="line"></span><br><span class="line">        person.eat();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//end  main</span></span><br><span class="line"></span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td>
                    </tr>
                  </table>
                </figure>
              </p>
              <p>&#x6700;&#x540E;&#x8F93;&#x51FA;&#xFF1A;</p>
              <p>
                <figure class="highlight erlang-repl">
                  <table>
                    <tr>
                      <td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td>
                      <td class="code"><pre><span class="line">&#x4EBA;&#x5403;&#x996D;&#x4E4B;&#x524D;&#x8981;&#x6D17;&#x624B;.....</span><br><span class="line">&#x4EBA;&#x8981;&#x5403;&#x996D; <span class="exclamation_mark">!</span><span class="exclamation_mark">!</span></span><br><span class="line"> &#x4EBA;&#x5403;&#x996D;&#x4E4B;&#x540E;&#x8981;&#x6D17;&#x7897;...</span><br></pre></td>
                    </tr>
                  </table>
                </figure>
              </p>
              <h2 id="cglib-&#x751F;&#x6210;&#x52A8;&#x6001;&#x4EE3;&#x7406;&#x7C7B;&#x7684;&#x673A;&#x5236;-&#x901A;&#x8FC7;&#x7C7B;&#x7EE7;&#x627F;">cglib &#x751F;&#x6210;&#x52A8;&#x6001;&#x4EE3;&#x7406;&#x7C7B;&#x7684;&#x673A;&#x5236; ---- &#x901A;&#x8FC7;&#x7C7B;&#x7EE7;&#x627F;</h2>
              <p>JDK &#x4E2D;&#x63D0;&#x4F9B;&#x7684;&#x751F;&#x6210;&#x52A8;&#x6001;&#x4EE3;&#x7406;&#x7C7B;&#x7684;&#x673A;&#x5236;&#x6709;&#x4E2A;&#x9C9C;&#x660E;&#x7684;&#x7279;&#x70B9;&#x662F;&#xFF1A; &#x67D0;&#x4E2A;&#x7C7B;&#x5FC5;&#x987B;&#x6709;&#x5B9E;&#x73B0;&#x7684;&#x63A5;&#x53E3;&#xFF0C;&#x800C;&#x751F;&#x6210;&#x7684;&#x4EE3;&#x7406;&#x7C7B;&#x4E5F;&#x53EA;&#x80FD;&#x4EE3;&#x7406;&#x67D0;&#x4E2A;&#x7C7B;&#x63A5;&#x53E3;&#x5B9A;&#x4E49;&#x7684;&#x65B9;&#x6CD5;&#xFF0C;&#x6BD4;&#x5982;&#xFF1A;&#x5982;&#x679C;&#x4E0A;&#x9762;&#x4F8B;&#x5B50;&#x7684;
                ElectricCar &#x5B9E;&#x73B0;&#x4E86;&#x7EE7;&#x627F;&#x81EA;&#x4E24;&#x4E2A;&#x63A5;&#x53E3;&#x7684;&#x65B9;&#x6CD5;&#x5916;&#xFF0C;&#x53E6;&#x5916;&#x5B9E;&#x73B0;&#x4E86;&#x65B9;&#x6CD5; bee() , &#x5219;&#x5728;&#x4EA7;&#x751F;&#x7684;&#x52A8;&#x6001;&#x4EE3;&#x7406;&#x7C7B;&#x4E2D;&#x4E0D;&#x4F1A;&#x6709;&#x8FD9;&#x4E2A;&#x65B9;&#x6CD5;&#x4E86;&#xFF01;&#x66F4;&#x6781;&#x7AEF;&#x7684;&#x60C5;&#x51B5;&#x662F;&#xFF1A;&#x5982;&#x679C;&#x67D0;&#x4E2A;&#x7C7B;&#x6CA1;&#x6709;&#x5B9E;&#x73B0;&#x63A5;&#x53E3;&#xFF0C;&#x90A3;&#x4E48;&#x8FD9;&#x4E2A;&#x7C7B;&#x5C31;&#x4E0D;&#x80FD;&#x540C;
                JDK &#x4EA7;&#x751F;&#x52A8;&#x6001;&#x4EE3;&#x7406;&#x4E86;&#xFF01; &#x5E78;&#x597D;&#x6211;&#x4EEC;&#x6709; cglib&#x3002;&#x201C;CGLIB&#xFF08;Code Generation Library&#xFF09;&#xFF0C;&#x662F;&#x4E00;&#x4E2A;&#x5F3A;&#x5927;&#x7684;&#xFF0C;&#x9AD8;&#x6027;&#x80FD;&#xFF0C;&#x9AD8;&#x8D28;&#x91CF;&#x7684;
                Code &#x751F;&#x6210;&#x7C7B;&#x5E93;&#xFF0C;&#x5B83;&#x53EF;&#x4EE5;&#x5728;&#x8FD0;&#x884C;&#x671F;&#x6269;&#x5C55; Java &#x7C7B;&#x4E0E;&#x5B9E;&#x73B0; Java &#x63A5;&#x53E3;&#x3002;&#x201D;</p>
              <p>
                <figure class="highlight cs">
                  <table>
                    <tr>
                      <td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td>
                      <td class="code"><pre><span class="line">package com.gizwits.bean;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">User</span> {</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">eat</span>(<span class="params"></span>) </span>{</span><br><span class="line">        System.<span class="keyword">out</span>.println(<span class="string">&quot;&#x4EBA;&#x8981;&#x5403;&#x996D;!!&quot;</span>);</span><br><span class="line"></span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td>
                    </tr>
                  </table>
                </figure>
              </p>
              <h3 id="&#x5B9E;&#x73B0;&#x65B9;&#x6CD5;&#x7684;&#x62E6;&#x622A;&#x5668;">&#x5B9E;&#x73B0;&#x65B9;&#x6CD5;&#x7684;&#x62E6;&#x622A;&#x5668;</h3>
              <p>
                <figure class="highlight java">
                  <table>
                    <tr>
                      <td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td>
                      <td class="code"><pre><span class="line"><span class="keyword">package</span> com.gizwits.proxy;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> net.sf.cglib.proxy.MethodInterceptor;</span><br><span class="line"><span class="keyword">import</span> net.sf.cglib.proxy.MethodProxy;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.Method;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CGlibInterceptor</span> <span class="keyword">implements</span> <span class="title">MethodInterceptor</span> </span>{</span><br><span class="line">    <span class="annotation">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Object <span class="title">intercept</span><span class="params">(Object obj, Method method, Object[] args, MethodProxy proxy)</span> <span class="keyword">throws</span> Throwable </span>{</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">&quot;&#x4EBA;&#x5403;&#x996D;&#x4E4B;&#x524D;&#x8981;&#x6D17;&#x624B;.....&quot;</span>);</span><br><span class="line"></span><br><span class="line">        Object invoke = proxy.invokeSuper(obj, args);</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">&quot;&#x4EBA;&#x5403;&#x996D;&#x4E4B;&#x540E;&#x8981;&#x6D17;&#x7897;...&quot;</span>);</span><br><span class="line">        <span class="comment">//   &#x8FD9;&#x91CC;&#x53EF;&#x4EE5;&#x6CA1;&#x6709;&#x8FD4;&#x56DE;&#x503C;, &#x5177;&#x4F53;&#x770B;&#x65B9;&#x6CD5;&#x662F;&#x5426;&#x9700;&#x8981;&#x8FD4;&#x56DE;&#x503C;.</span></span><br><span class="line">        <span class="keyword">return</span> invoke;</span><br><span class="line"></span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td>
                    </tr>
                  </table>
                </figure>
              </p>
              <p>
                <figure class="highlight java">
                  <table>
                    <tr>
                      <td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td>
                      <td class="code"><pre><span class="line"><span class="keyword">package</span> com.gizwits.proxy;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.gizwits.bean.User;</span><br><span class="line"><span class="keyword">import</span> net.sf.cglib.proxy.Enhancer;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CGlibProxy</span> </span>{</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>{</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        User user = <span class="keyword">new</span> User();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//cglib &#x4E2D;&#x52A0;&#x5F3A;&#x5668;&#xFF0C;&#x7528;&#x6765;&#x521B;&#x5EFA;&#x52A8;&#x6001;&#x4EE3;&#x7406; </span></span><br><span class="line">        Enhancer enhancer = <span class="keyword">new</span> Enhancer();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// &#x8BBE;&#x7F6E;&#x8981;&#x521B;&#x5EFA;&#x52A8;&#x6001;&#x4EE3;&#x7406;&#x7684;&#x7C7B;</span></span><br><span class="line">        enhancer.setSuperclass(user.getClass());</span><br><span class="line">        <span class="comment">// &#x8BBE;&#x7F6E;&#x56DE;&#x8C03;(&#x65B9;&#x6CD5;&#x62E6;&#x622A;&#x5668;)&#xFF0C;&#x8FD9;&#x91CC;&#x76F8;&#x5F53;&#x4E8E;&#x662F;&#x5BF9;&#x4E8E;&#x4EE3;&#x7406;&#x7C7B;&#x4E0A;&#x6240;&#x6709;&#x65B9;&#x6CD5;&#x7684;&#x8C03;&#x7528;&#xFF0C;&#x90FD;&#x4F1A;&#x8C03;&#x7528; CallBack&#xFF0C;&#x800C; Callback &#x5219;&#x9700;&#x8981;&#x5B9E;&#x884C; intercept() &#x65B9;&#x6CD5;&#x8FDB;&#x884C;&#x62E6;&#x622A;</span></span><br><span class="line">        enhancer.setCallback(<span class="keyword">new</span> CGlibInterceptor());</span><br><span class="line"></span><br><span class="line">        User u = (User) enhancer.create();</span><br><span class="line"></span><br><span class="line">        u.eat();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//end  main</span></span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td>
                    </tr>
                  </table>
                </figure>
              </p>
              <p>&#x8F93;&#x51FA;&#xFF1A;</p>
              <p>
                <figure class="highlight erlang-repl">
                  <table>
                    <tr>
                      <td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td>
                      <td class="code"><pre><span class="line">&#x4EBA;&#x5403;&#x996D;&#x4E4B;&#x524D;&#x8981;&#x6D17;&#x624B;.....</span><br><span class="line">&#x4EBA;&#x8981;&#x5403;&#x996D; <span class="exclamation_mark">!</span><span class="exclamation_mark">!</span></span><br><span class="line"> &#x4EBA;&#x5403;&#x996D;&#x4E4B;&#x540E;&#x8981;&#x6D17;&#x7897;...</span><br></pre></td>
                    </tr>
                  </table>
                </figure>
              </p>

            </div>
            <footer>




              <div class="clearfix"></div>
            </footer>
          </div>
        </article>

        <article class="post">

          <div class="post-content">
            <header>

              <div class="icon"></div>
              <time datetime="2016-03-08T03:03:46.000Z"><a href="/2016/03/08/linux-交换分区/">2016-03-08</a></time>

              <h1 class="title"><a href="/2016/03/08/linux-交换分区/">linux  交换分区</a></h1>
            </header>
            <div class="entry">

              <p> &#x5229;&#x7528; swapoff &#x548C; swapon &#x5237;&#x65B0; swap &#x7F13;&#x5B58; </p>
              <h2 id="&#x5982;&#x4F55;&#x6E05;&#x9664;-linux-&#x7684;&#x4EA4;&#x6362;&#x7A7A;&#x95F4;"> &#x5982;&#x4F55;&#x6E05;&#x9664; Linux &#x7684;&#x4EA4;&#x6362;&#x7A7A;&#x95F4;&#xFF1F;</h2>
              <p> &#x6709;&#x65F6;&#x8FD0;&#x884C;&#x5927;&#x91CF;&#x7684;&#x8FDB;&#x7A0B;&#x540E; swap &#x5927;&#x91CF;&#x5360;&#x7528;&#xFF0C;&#x8FBE;&#x5230; 30% &#x7684;&#x8BDD;&#x673A;&#x5668;&#x4F1A;&#x53D8;&#x5F97;&#x5F88;&#x6162; &#x53EF;&#x4EE5;&#x7528;&#x4EE5;&#x4E0B;&#x4E24;&#x4E2A;&#x547D;&#x4EE4;&#x6E05;&#x9664;&#x5237;&#x65B0;
                swap
              </p>
              <p>
                <figure class="highlight autohotkey">
                  <table>
                    <tr>
                      <td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td>
                      <td class="code"><pre><span class="line"></span><br><span class="line">swapoff -<span class="literal">a</span> &amp;&amp; swapon -<span class="literal">a</span></span><br></pre></td>
                    </tr>
                  </table>
                </figure>
              </p>
              <p>&lt;!--more--&gt;</p>
              <p> &#x4EE5;&#x4E0B;&#x662F;&#x8BBE;&#x7F6E; swap &#x4F18;&#x5148;&#x7EA7;&#x7684;&#x65B9;&#x6CD5; </p>
              <p>swappiness Ubuntu Feisty &#x9ED8;&#x8BA4;&#x7684; vm.swappiness &#x503C;&#x662F; 60, &#x8FD9;&#x4E00;&#x9ED8;&#x8BA4;&#x503C;&#x5DF2;&#x7ECF;&#x5F88;&#x5408;&#x9002;&#x4E86;&#x3002;&#x4F46;&#x4F60;&#x53EF;&#x4EE5;&#x6539;&#x5C0F;&#x4E00;&#x4E9B;&#x964D;&#x4F4E;
                swap &#x7684;&#x52A0;&#x8F7D;&#xFF0C;&#x7CFB;&#x7EDF;&#x6027;&#x80FD;&#x4F1A;&#x6709;&#x4E00;&#x70B9;&#x70B9;&#x7684;&#x63D0;&#x5347; &#x8F93; &#x5165;&#xFF1A;</p>
              <p>
                <figure class="highlight stylus">
                  <table>
                    <tr>
                      <td class="gutter"><pre><span class="line">1</span><br></pre></td>
                      <td class="code"><pre><span class="line">sysctl -<span class="tag">q</span> vm.swappiness</span><br></pre></td>
                    </tr>
                  </table>
                </figure>
              </p>
              <p> &#x4F60;&#x4F1A;&#x770B;&#x5230;&#x503C;&#x662F; 60&#xFF0C; &#x66F4;&#x6539;:</p>
              <p>
                <figure class="highlight cpp">
                  <table>
                    <tr>
                      <td class="gutter"><pre><span class="line">1</span><br></pre></td>
                      <td class="code"><pre><span class="line">sudo sysctl vm.swappiness=<span class="number">10</span></span><br></pre></td>
                    </tr>
                  </table>
                </figure>
              </p>
              <p> &#x8FD9; &#x6837;&#x4F60;&#x5C31;&#x5C06;&#x503C;&#x7531; 60 &#x6539;&#x4E3A; 10, &#x8FD9;&#x53EF;&#x4EE5;&#x5927;&#x5927;&#x964D;&#x4F4E;&#x7CFB;&#x7EDF;&#x5BF9;&#x4E8E; swap &#x7684;&#x5199;&#x5165;&#xFF0C;&#x5EFA;&#x8BAE;&#x5185;&#x5B58;&#x4E3A;
                512m &#x6216;&#x66F4;&#x591A;&#x7684;&#x670B;&#x53CB;&#x91C7;&#x7528;&#x6B64;&#x65B9;&#x6CD5;&#x3002;&#x5982;&#x4F60;&#x4F60;&#x53D1;&#x73B0;&#x4F60;&#x5BF9;&#x4E8E; swap &#x7684;&#x4F7F;&#x7528;&#x6781;&#x5C11;&#xFF0C;&#x53EF; &#x4EE5;&#x5C06;&#x503C;&#x8BBE;&#x4E3A;
                0&#x3002;&#x8FD9;&#x5E76;&#x4E0D;&#x4F1A;&#x7981;&#x6B62;&#x4F60;&#x5BF9; swap &#x7684;&#x4F7F;&#x7528;&#xFF0C;&#x800C;&#x662F;&#x4F7F;&#x4F60;&#x7684;&#x7CFB;&#x7EDF;&#x5BF9;&#x4E8E; swap &#x7684;&#x5199;&#x5165;&#x5C3D;&#x53EF;&#x80FD;&#x7684;&#x5C11;&#xFF0C;&#x540C;&#x65F6;&#x5C3D;&#x53EF;&#x80FD;&#x591A;&#x7684;&#x4F7F;&#x7528;&#x4F60;&#x7684;&#x5B9E;&#x9645;&#x5185;&#x5B58;&#x3002;&#x8FD9;&#x5BF9;&#x4E8E;&#x4F60;&#x5728;&#x5207;&#x6362;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;
                &#x65F6;&#x6709;&#x7740;&#x5DE8;&#x5927;&#x7684;&#x4F5C;&#x7528;&#xFF0C;&#x56E0;&#x4E3A;&#x8FD9;&#x6837;&#x7684;&#x8BDD;&#x5B83;&#x4EEC;&#x662F;&#x5728;&#x7269;&#x7406;&#x5185;&#x5B58;&#x800C;&#x975E; swap &#x5206;&#x533A;&#x4E2D;&#x3002;
                &#x5982;&#x679C;&#x4F60;&#x60F3;&#x6C38;&#x4E45;&#x5F97;&#x6539;&#x53D8;&#x8FD9;&#x4E00;&#x503C;&#xFF0C;&#x4F60;&#x9700;&#x8981;&#x66F4;&#x6539; sysctl.conf &#x6587;&#x4EF6;&#xFF1A;</p>
              <p>
                <figure class="highlight vim">
                  <table>
                    <tr>
                      <td class="gutter"><pre><span class="line">1</span><br></pre></td>
                      <td class="code"><pre><span class="line"><span class="keyword">vim</span> /etc/sysctl.<span class="keyword">conf</span></span><br></pre></td>
                    </tr>
                  </table>
                </figure>
              </p>
              <p> &#x6DFB;&#x52A0;&#xFF1A;</p>
              <p>
                <figure class="highlight cpp">
                  <table>
                    <tr>
                      <td class="gutter"><pre><span class="line">1</span><br></pre></td>
                      <td class="code"><pre><span class="line">vm.swappiness=<span class="number">10</span></span><br></pre></td>
                    </tr>
                  </table>
                </figure>
              </p>
              <p> &#x5230;&#x672B;&#x884C;&#xFF0C;&#x9700;&#x8981;&#x91CD;&#x542F;&#x751F;&#x6548;&#x3002; &#x6211;&#x53D1;&#x73B0;&#x5BF9; &#x4E8E;&#x6211;&#x7684; 1G &#x5185;&#x5B58;&#xFF0C;&#x5C06;&#x6B64;&#x503C;&#x8BBE;&#x4E3A; 5 &#x662F;&#x6700;&#x5408;&#x9002;&#x7684;&#x3002;</p>

            </div>
            <footer>




              <div class="clearfix"></div>
            </footer>
          </div>
        </article>

        <article class="post">

          <div class="post-content">
            <header>

              <div class="icon"></div>
              <time datetime="2016-01-02T14:52:17.000Z"><a href="/2016/01/02/ssl双向认证/">2016-01-02</a></time>

              <h1 class="title"><a href="/2016/01/02/ssl双向认证/">ssl 双向认证</a></h1>
            </header>
            <div class="entry">

              <p> &#x6709;&#x65F6;&#x5019;&#x6211;&#x4EEC;&#x4E00;&#x4E9B;&#x7AEF;&#x53E3;&#x548C;&#x7F51;&#x7AD9;&#x9700;&#x8981; ssl &#x53CC;&#x5411;&#x8BA4;&#x8BC1; </p>
              <p>1. &#x5B89;&#x88C5; htpasswd</p>
              <p>ubuntu</p>
              <p>
                <figure class="highlight actionscript">
                  <table>
                    <tr>
                      <td class="gutter"><pre><span class="line">1</span><br></pre></td>
                      <td class="code"><pre><span class="line">apt-<span class="keyword">get</span> install apache2-utils</span><br></pre></td>
                    </tr>
                  </table>
                </figure>
              </p>
              <p>&lt;!--more--&gt;</p>
              <p>centos</p>
              <p>
                <figure class="highlight cmake">
                  <table>
                    <tr>
                      <td class="gutter"><pre><span class="line">1</span><br></pre></td>
                      <td class="code"><pre><span class="line">yum <span class="keyword">install</span> -y httpd-tools</span><br></pre></td>
                    </tr>
                  </table>
                </figure>
              </p>
              <ol start="2">
                <li> &#x65B0;&#x5EFA;&#x76EE;&#x5F55;&#x751F;&#x4EA7;&#x5BC6;&#x7801; </li>
              </ol>
              <p>
                <figure class="highlight stylus">
                  <table>
                    <tr>
                      <td class="gutter"><pre><span class="line">1</span><br></pre></td>
                      <td class="code"><pre><span class="line">htpasswd -bcs  kibana<span class="class">.passwd</span>      user   passwd</span><br></pre></td>
                    </tr>
                  </table>
                </figure>
              </p>
              <ol start="3">
                <li> &#x65B0;&#x5EFA;&#x76EE;&#x5F55;&#x751F;&#x6210; ssl &#x79C1;&#x94A5; &#x65B0;&#x5EFA; CA/private
                </li>
              </ol>
              <p>
                <figure class="highlight cpp">
                  <table>
                    <tr>
                      <td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td>
                      <td class="code"><pre><span class="line"></span><br><span class="line">(umask <span class="number">077</span>;openssl genrsa -out cakey.pem <span class="number">2048</span>)</span><br><span class="line">openssl req -<span class="keyword">new</span> -x509 -key <span class="keyword">private</span>/cakey.pem -out cacert.pem -days <span class="number">365500</span></span><br></pre></td>
                    </tr>
                  </table>
                </figure>
              </p>
              <ol start="4">
                <li> &#x751F;&#x6210; ssl</li>
              </ol>
              <p> &#x6B64;&#x65F6;&#x4F1A;&#x6709;&#x8BC1;&#x4E66;&#x5BC6;&#x7801; </p>
              <p>
                <figure class="highlight css">
                  <table>
                    <tr>
                      <td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td>
                      <td class="code"><pre><span class="line">(<span class="tag">umask</span> 077;<span class="tag">openssl</span> <span class="tag">genrsa</span> <span class="tag">-out</span> <span class="tag">kibana</span><span class="class">.gizwits</span><span class="class">.com</span><span class="class">.key</span> 1024)</span><br><span class="line"></span><br><span class="line"><span class="tag">openssl</span> <span class="tag">req</span> <span class="tag">-new</span> <span class="tag">-key</span> <span class="tag">kibana</span><span class="class">.gizwits</span><span class="class">.com</span><span class="class">.key</span> <span class="tag">-out</span> <span class="tag">kibana</span><span class="class">.gizwits</span><span class="class">.com</span><span class="class">.csr</span></span><br><span class="line"></span><br><span class="line"><span class="tag">openssl</span> <span class="tag">ca</span> <span class="tag">-in</span> <span class="tag">kibana</span><span class="class">.gizwits</span><span class="class">.com</span><span class="class">.csr</span> <span class="tag">-out</span> <span class="tag">kibana</span><span class="class">.gizwits</span><span class="class">.com</span><span class="class">.crt</span> <span class="tag">-days</span> 365500</span><br></pre></td>
                    </tr>
                  </table>
                </figure>
              </p>
              <p>
                <figure class="highlight css">
                  <table>
                    <tr>
                      <td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td>
                      <td class="code"><pre><span class="line">(<span class="tag">umask</span> 077;<span class="tag">openssl</span> <span class="tag">genrsa</span> <span class="tag">-out</span> <span class="tag">kibana</span><span class="class">.gizwits</span><span class="class">.com</span><span class="class">.client</span><span class="class">.key</span> 1024)</span><br><span class="line"></span><br><span class="line"><span class="tag">openssl</span> <span class="tag">req</span> <span class="tag">-new</span> <span class="tag">-key</span> <span class="tag">kibana</span><span class="class">.gizwits</span><span class="class">.com</span><span class="class">.client</span><span class="class">.key</span> <span class="tag">-out</span> <span class="tag">kibana</span><span class="class">.gizwits</span><span class="class">.com</span><span class="class">.client</span><span class="class">.csr</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="tag">openssl</span> <span class="tag">ca</span> <span class="tag">-in</span> <span class="tag">kibana</span><span class="class">.gizwits</span><span class="class">.com</span><span class="class">.client</span><span class="class">.csr</span> <span class="tag">-out</span> <span class="tag">kibana</span><span class="class">.gizwits</span><span class="class">.com</span><span class="class">.client</span><span class="class">.crt</span> <span class="tag">-days</span> 365500</span><br></pre></td>
                    </tr>
                  </table>
                </figure>
              </p>
              <p> &#x5C06;&#x6587;&#x672C;&#x683C;&#x5F0F;&#x7684;&#x8BC1;&#x4E66;&#x8F6C;&#x6362;&#x6210;&#x53EF;&#x4EE5;&#x5BFC;&#x5165;&#x6D4F;&#x89C8;&#x5668;&#x7684;&#x8BC1;&#x4E66; </p>
              <p>
                <figure class="highlight stylus">
                  <table>
                    <tr>
                      <td class="gutter"><pre><span class="line">1</span><br></pre></td>
                      <td class="code"><pre><span class="line">openssl pkcs12 -export -clcerts -<span class="keyword">in</span> kibana<span class="class">.gizwits</span><span class="class">.com</span><span class="class">.client</span><span class="class">.crt</span> -inkey kibana<span class="class">.gizwits</span><span class="class">.com</span><span class="class">.client</span><span class="class">.key</span> -out kibana<span class="class">.gizwits</span><span class="class">.com</span><span class="class">.client</span><span class="class">.p12</span></span><br></pre></td>
                    </tr>
                  </table>
                </figure>
              </p>
              <p>5.nginx &#x914D;&#x7F6E; </p>
              <p>
                <figure class="highlight dust">
                  <table>
                    <tr>
                      <td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td>
                      <td class="code"><pre><span class="line"><span class="xml">server </span><span class="expression">{</span><br><span class="line">       </span><br><span class="line">    <span class="variable">listen</span>      443  ;</span><br><span class="line">    <span class="variable">root</span> <span class="end-block">/usr</span><span class="end-block">/share</span><span class="end-block">/nginx</span><span class="end-block">/html</span>;</span><br><span class="line">    <span class="variable">index</span> <span class="variable">index.html</span> <span class="variable">index.htm</span>;</span><br><span class="line"></span><br><span class="line">    <span class="begin-block"># Make site accessible from http</span>:/<span class="end-block">/localhost</span>/</span><br><span class="line">    <span class="variable">server</span>_<span class="variable">name</span> <span class="variable">localhost</span>;</span><br><span class="line">    <span class="variable">ssl</span> <span class="variable">on</span>;</span><br><span class="line">    <span class="variable">ssl</span>_<span class="variable">certificate</span>         <span class="end-block">/etc</span><span class="end-block">/nginx</span><span class="end-block">/kibanassl</span><span class="end-block">/kibana.gizwits.com.crt</span>;</span><br><span class="line">    <span class="variable">ssl</span>_<span class="variable">certificate</span>_<span class="variable">key</span>     <span class="end-block">/etc</span><span class="end-block">/nginx</span><span class="end-block">/kibanassl</span><span class="end-block">/kibana.gizwits.com.key</span>;</span><br><span class="line">    <span class="variable">ssl</span>_<span class="variable">client</span>_<span class="variable">certificate</span>  <span class="end-block">/etc</span><span class="end-block">/nginx</span><span class="end-block">/kibanassl</span><span class="end-block">/CA</span><span class="end-block">/cacert.pem</span>;</span><br><span class="line">    <span class="variable">ssl</span>_<span class="variable">session</span>_<span class="variable">timeout</span>     20<span class="variable">m</span>;</span><br><span class="line">    <span class="variable">ssl</span>_<span class="variable">verify</span>_<span class="variable">client</span>       <span class="variable">on</span>;</span><br><span class="line">    <span class="variable">ssl</span>_<span class="variable">protocols</span>           <span class="variable">SSLv</span>2 <span class="variable">SSLv</span>3 <span class="variable">TLSv</span>1;</span><br><span class="line">    <span class="begin-block">#charset koi</span>8<span class="variable">-r</span>;</span><br><span class="line">    <span class="begin-block">#access</span>_<span class="variable">log</span>  <span class="end-block">/var</span><span class="end-block">/log</span><span class="end-block">/nginx</span><span class="end-block">/log</span><span class="end-block">/host.access.log  main</span>;</span><br><span class="line"> </span><br><span class="line">   </span><br><span class="line">    <span class="variable">location</span> <span class="end-block">/ </span>{</span><br><span class="line">      <span class="variable">auth</span>_<span class="variable">basic</span> <span class="string">&quot;Restricted&quot;</span>;</span><br><span class="line">      <span class="variable">auth</span>_<span class="variable">basic</span>_<span class="variable">user</span>_<span class="variable">file</span> <span class="end-block">/etc</span><span class="end-block">/nginx</span><span class="end-block">/httppasswd</span><span class="end-block">/kibana.passwd</span>;</span><br><span class="line">      <span class="variable">proxy</span>_<span class="variable">pass</span> <span class="variable">http</span>:/<span class="end-block">/localhost</span>:5601;</span><br><span class="line">      <span class="variable">index</span>  <span class="variable">index.html</span> <span class="variable">index.htm</span>;</span><br><span class="line">      </span><br><span class="line">    }</span><span class="xml"></span><br><span class="line">}</span></span><br></pre></td>
                    </tr>
                  </table>
                </figure>
              </p>
              <p>6. &#x9632;&#x706B;&#x5899;&#x8BBE;&#x7F6E; </p>
              <p>
                <figure class="highlight bash">
                  <table>
                    <tr>
                      <td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br></pre></td>
                      <td class="code"><pre><span class="line"><span class="shebang">#!/bin/bash</span><br><span class="line"></span></span><br><span class="line"><span class="comment">#  coding &quot;feel&quot;</span></span><br><span class="line"><span class="comment">#  /etc/sysconfig/iptables</span></span><br><span class="line"><span class="comment"># ssh root@MachineB &apos;bash -s&apos; &lt; local_script.sh</span></span><br><span class="line"><span class="comment"># use puppet later</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">declare</span> -A hosts</span><br><span class="line"></span><br><span class="line"><span class="comment">#   &#x5BF9;&#x4EE5;&#x4E0B;&#x673A;&#x5668; &#x7AEF;&#x53E3;&#x5168;&#x90E8;&#x5F00;&#x653E; </span></span><br><span class="line">hosts=(</span><br><span class="line">  [feel]=<span class="number">127.0</span>.<span class="number">0.1</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment">#  &#x672C;&#x673A;&#x9700;&#x8981;&#x5BF9;&#x5916;&#x5F00;&#x653E;&#x7684;&#x7AEF;&#x53E3; </span></span><br><span class="line"><span class="built_in">declare</span> -A  mports     </span><br><span class="line">mports=(</span><br><span class="line">  [website]=<span class="number">80</span></span><br><span class="line">)</span><br><span class="line"><span class="comment"># &#x58F0;&#x660E; &#x4E3B;&#x673A;&#x540D; </span></span><br><span class="line"><span class="built_in">declare</span>  -x  localname</span><br><span class="line"><span class="comment">#  &#x4E3B;&#x673A;&#x540D; </span></span><br><span class="line">localname=<span class="string">&quot;cloud&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#  &#x6E05;&#x9664;&#x89C4;&#x5219; </span></span><br><span class="line"></span><br><span class="line">iptables  -F</span><br><span class="line">iptables  -t nat -L</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">iptables  -P INPUT DROP</span><br><span class="line">iptables  -P FORWARD DROP</span><br><span class="line">iptables  -P OUTPUT ACCEPT</span><br><span class="line"></span><br><span class="line"><span class="comment">#  22  &#x4E3A; ssh &#x7AEF;&#x53E3;, &#x9632;&#x6B62;&#x81EA;&#x9501;&#x5728;&#x7CFB;&#x7EDF;&#x4E2D; </span></span><br><span class="line"></span><br><span class="line">iptables   -A INPUT -p tcp -m state --state NEW -m tcp --dport <span class="number">22</span> -j ACCEPT</span><br><span class="line"></span><br><span class="line">iptables   -A  INPUT -i lo -j ACCEPT</span><br><span class="line"></span><br><span class="line">iptables   -A   INPUT -m state --state ESTABLISHED,RELATED -j ACCEPT</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> [<span class="string">&quot;<span class="variable">$(hostname)</span>&quot;</span> == <span class="string">&quot;<span class="variable">$localname</span>&quot;</span> ]; <span class="keyword">then</span></span><br><span class="line">  <span class="comment">#iptables -t nat -A PREROUTING -i eth0 -p tcp --dport 443 -j DNAT --to-destination :5601</span></span><br><span class="line">  <span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$localname</span>&quot;</span></span><br><span class="line">  <span class="keyword">for</span> p <span class="keyword">in</span> <span class="string">&quot;<span class="variable">${!mports[@]}</span>&quot;</span></span><br><span class="line">  <span class="keyword">do</span></span><br><span class="line">   <span class="built_in">echo</span>  <span class="string">&quot;&#x5916;&#x7F51;&#x5F00;&#x653E;&#x7AEF;&#x53E3; <span class="variable">${mports[$p]}</span>&quot;</span></span><br><span class="line">   iptables   -A INPUT -p tcp -m state --state NEW -m tcp --dport <span class="variable">${mports[$p]}</span> -j ACCEPT</span><br><span class="line">  <span class="keyword">done</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> h <span class="keyword">in</span> <span class="string">&quot;<span class="variable">${!hosts[@]}</span>&quot;</span></span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">  <span class="keyword">if</span> [<span class="string">&quot;<span class="variable">$(hostname)</span>&quot;</span> != <span class="string">&quot;<span class="variable">$h</span>&quot;</span> ]; <span class="keyword">then</span></span><br><span class="line">    iptables -A INPUT <span class="operator">-s</span> <span class="variable">${hosts[$h]}</span> -j ACCEPT</span><br><span class="line">  <span class="keyword">fi</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#iptables -A INPUT -p icmp --icmp-type 8 -i eth0 -j ACCEPT</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># &#x5C4F;&#x853D;&#x4E86; nmap &#x63A2;&#x6D4B;&#x7684; icmp &#x56DE;&#x5E94;, &#x4EE5;&#x4E0B;&#x89C4;&#x5219;&#x662F;&#x9488;&#x5BF9;&#x6211;&#x81EA;&#x5DF1;&#x7684; vps &#x6DFB;&#x52A0;&#x7684; </span></span><br><span class="line">iptables -A INPUT -j REJECT --reject-with icmp-host-prohibited</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#iptables -A INPUT -p tcp --dport 443 -j ACCEPT</span></span><br><span class="line"></span><br><span class="line">/sbin/iptables-save</span><br><span class="line"></span><br><span class="line">iptables -L -v</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#   close</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#iptables -P INPUT ACCEPT </span></span><br><span class="line"></span><br><span class="line"><span class="comment">#iptables -P FORWARD ACCEPT </span></span><br><span class="line"></span><br><span class="line"><span class="comment">#iptables -P OUTPUT ACCEPT </span></span><br><span class="line"></span><br><span class="line"><span class="comment">#iptables -F </span></span><br><span class="line"><span class="comment">#iptables -t nat -L</span></span><br><span class="line"><span class="comment">#</span></span><br></pre></td>
                    </tr>
                  </table>
                </figure>
              </p>

            </div>
            <footer>




              <div class="clearfix"></div>
            </footer>
          </div>
        </article>

        <article class="post">

          <div class="post-content">
            <header>

              <div class="icon"></div>
              <time datetime="2015-12-27T11:40:43.000Z"><a href="/2015/12/27/autossh隧道搭建私服/">2015-12-27</a></time>

              <h1 class="title"><a href="/2015/12/27/autossh隧道搭建私服/">autossh 隧道搭建私服</a></h1>
            </header>
            <div class="entry">

              <p> &#x5E94;&#x540C;&#x4E8B;&#x7684;&#x8981;&#x6C42;&#xFF1A;&#x4ED6;&#x60F3;&#x5B9E;&#x73B0;&#x8FDC;&#x7A0B;&#x767B;&#x5165;&#x5BB6;&#x91CC;&#x7684;&#x5C40;&#x57DF;&#x7F51;&#x670D;&#x52A1;&#x5668;&#x3002;</p>
              <p> &#x60C5;&#x51B5;&#x662F;&#x8FD9;&#x6837;&#x7684;&#x3002;&#x5BB6;&#x91CC;&#x6709;&#x53F0;&#x670D;&#x52A1;&#x5668;&#xFF08;&#x7B14;&#x8BB0;&#x672C;&#x5373;&#x53EF;&#xFF09;&#x3002;&#x4E00;&#x53F0;&#x5916;&#x7F51;&#x670D;&#x52A1;&#x5668;&#x3002;</p>
              <p> &#x60F3;&#x901A;&#x8FC7;&#x5728;&#x516C;&#x53F8;&#x8FDC;&#x7A0B;&#x767B;&#x5165;&#x5BB6;&#x91CC;&#x7684;&#x90A3;&#x53F0;&#x5C40;&#x57DF;&#x7F51;&#x670D;&#x52A1;&#x5668;&#x3002;</p>
              <p> &#x5F00;&#x59CB;&#x6211;&#x7684;&#x60F3;&#x6CD5;&#x662F;&#xFF1A;&#x642D;&#x5EFA; openvpn &#x3002;&#x4F46;&#x662F;&#x6BD5;&#x7ADF;&#x4E0D;&#x662F;&#x4EC0;&#x4E48;&#x4EBA;&#x90FD;&#x80FD;&#x642D;&#x5EFA;&#x6210;&#x529F;&#xFF0C;&#x800C;&#x4E14;&#x8FD8;&#x6709;&#x5F88;&#x591A;&#x7F3A;&#x70B9;&#x3002;
                &#x64CD;&#x4F5C;&#x590D;&#x6742; </p>
              <p> &#x4E00;&#x4E2A;&#x5468;&#x672B;&#x7684;&#x4E0B;&#x5348;&#x6211;&#x7A81;&#x7136;&#x60F3;&#x8D77;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x96A7;&#x9053;&#x53CD;&#x5411;&#x4EE3;&#x7406;&#x51FA;&#x53BB;&#x3002;&#x4E5F;&#x662F;&#x4E00;&#x4E2A;&#x975E;&#x5E38;&#x4E0D;&#x9519;&#x7684;&#x65B9;&#x6CD5;&#x3002;--&gt;(&#x8FD9;&#x4E2A;&#x60F3;&#x6CD5;&#x6765;&#x81EA;&#x6211;&#x73B0;&#x5728;&#x7684;&#x4E0A;
                google &#x7684;&#x65B9;&#x5F0F;&#xFF09;</p>
              <p>&lt;!--more--&gt;</p>
              <p> &#x7406;&#x8BBA;&#x57FA;&#x7840;&#xFF1A;autossh &#x662F;&#x4E00;&#x4E2A;&#x7528;&#x6765;&#x542F;&#x52A8; ssh &#x5E76;&#x8FDB;&#x884C;&#x76D1;&#x63A7;&#x7684;&#x7A0B;&#x5E8F;&#xFF0C;&#x53EF;&#x5728;&#x9700;&#x8981;&#x65F6;&#x91CD;&#x542F;
                ssh&#xFF0C;&#x4F8B;&#x5982;&#x7A0B;&#x5E8F;&#x6302;&#x6389;&#x6216;&#x8005;&#x662F;&#x7F51;&#x7EDC;&#x51FA;&#x73B0;&#x95EE;&#x9898;&#x3002;&#x5176;&#x7075;&#x611F;&#x548C;&#x673A;&#x5236;&#x6765;&#x81EA;&#x4E8E; rstunnel (Reliable SSH
                Tunnel). autossh 1.2 &#x7684;&#x65B9;&#x6CD5;&#x5DF2;&#x7ECF;&#x6539;&#x53D8;&#xFF1A;autossh &#x4F7F;&#x7528; ssh &#x6765;&#x6784;&#x9020;&#x4E00;&#x4E2A; ssh &#x91CD;&#x5B9A;&#x5411;&#x5FAA;&#x73AF;&#xFF08;&#x672C;&#x5730;&#x5230;&#x8FDC;&#x7A0B;&#x548C;&#x8FDC;&#x7A0B;&#x5230;&#x672C;&#x5730;&#xFF09;&#xFF0C;&#x7136;&#x540E;&#x53D1;&#x9001;&#x6D4B;&#x8BD5;&#x6570;&#x636E;&#x5E76;&#x83B7;&#x5F97;&#x8FD4;&#x56DE;&#x7ED3;&#x679C;&#x3002;</p>
              <p> &#x5B9E;&#x9A8C;&#x73AF;&#x5883;&#xFF1A; &#x4E00;&#x53F0;&#x5916;&#x7F51;&#x670D;&#x52A1;&#x5668;&#x3002; &#x4E00;&#x53F0;&#x5C40;&#x57DF;&#x7F51;&#x670D;&#x52A1;&#x5668;&#xFF08;&#x6211;&#x8FD9;&#x91CC;&#x4F7F;&#x7528;&#x865A;&#x62DF;&#x673A;&#xFF09;
              </p>
              <p> &#x5916;&#x7F51;&#x673A;&#x5668; ip &#xFF08;&#x8FD9;&#x91CC;&#x8BBE;&#x7F6E;&#x4E3A; google)*****</p>
              <p> &#x865A;&#x62DF;&#x673A; ip &#x67E5;&#x770B; &#x4E3A; 192.168.1.100</p>
              <p>
                <figure class="highlight cpp">
                  <table>
                    <tr>
                      <td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td>
                      <td class="code"><pre><span class="line">[root@centos ~]<span class="preprocessor"># ifconfig |grep <span class="string">&quot;inet addr&quot;</span></span></span><br><span class="line">          inet addr:<span class="number">192.168</span><span class="number">.1</span><span class="number">.100</span>  Bcast:<span class="number">192.168</span><span class="number">.1</span><span class="number">.255</span>  Mask:<span class="number">255.255</span><span class="number">.255</span><span class="number">.0</span></span><br><span class="line">          inet addr:<span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>  Mask:<span class="number">255.0</span><span class="number">.0</span><span class="number">.0</span></span><br></pre></td>
                    </tr>
                  </table>
                </figure>
              </p>
              <p> &#x7F16;&#x5199; &#x811A;&#x672C;&#xFF1A; &#x8BE5;&#x811A;&#x672C;&#x53EF;&#x4EE5;&#x6839;&#x636E;&#x4F60;&#x81EA;&#x5DF1;&#x7684;&#x9700;&#x6C42;&#x8FDB;&#x884C;&#x4F18;&#x5316;&#x548C;&#x7F16;&#x5199; </p>
              <p>
                <figure class="highlight bash">
                  <table>
                    <tr>
                      <td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td>
                      <td class="code"><pre><span class="line">[root@centos ~]<span class="comment"># cat a.sh </span></span><br><span class="line"><span class="shebang">#!/bin/bash</span><br><span class="line"></span><br><span class="line"></span></span><br><span class="line">autossh -M <span class="number">5678</span> -NR <span class="number">19999</span>:localhost:<span class="number">22</span> feel@google</span><br></pre></td>
                    </tr>
                  </table>
                </figure>
              </p>
              <p> &#x5916;&#x7F51;&#x670D;&#x52A1;&#x5668; &#x6253;&#x5F00;&#x7AEF;&#x53E3; 19999 &#x6DFB;&#x52A0;&#x9632;&#x706B;&#x5899;&#x89C4;&#x5219;&#xFF1A;
              </p>
              <p>
                <figure class="highlight pf">
                  <table>
                    <tr>
                      <td class="gutter"><pre><span class="line">1</span><br></pre></td>
                      <td class="code"><pre><span class="line">-A INPUT -p tcp -m <span class="keyword">state</span> --state NEW -m tcp --dport <span class="number">19999</span> -j ACCEPT</span><br></pre></td>
                    </tr>
                  </table>
                </figure>
              </p>
              <p> &#x4E4B;&#x540E;&#x91CD;&#x542F;&#x9632;&#x706B;&#x5899; </p>
              <p>
                <figure class="highlight groovy">
                  <table>
                    <tr>
                      <td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td>
                      <td class="code"><pre><span class="line">[feel<span class="annotation">@cloud</span> ~]$ sudo service  iptables  restart</span><br><span class="line"><span class="string">iptables:</span> Setting chains to policy <span class="string">ACCEPT:</span> filter nat      [OK]</span><br><span class="line"><span class="string">iptables:</span> Flushing firewall <span class="string">rules:</span>                         [OK]</span><br><span class="line"><span class="string">iptables:</span> Unloading <span class="string">modules:</span>                               [OK]</span><br><span class="line"><span class="string">iptables:</span> Applying firewall <span class="string">rules:</span>                         [OK]</span><br></pre></td>
                    </tr>
                  </table>
                </figure>
              </p>
              <p> &#x5728;&#x865A;&#x62DF;&#x673A;&#x90A3;&#x53F0;&#x673A;&#x5668;&#x4E0A;&#x6267;&#x884C;&#x521A;&#x624D;&#x7684;&#x811A;&#x672C; </p>
              <p>
                <figure class="highlight coffeescript">
                  <table>
                    <tr>
                      <td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td>
                      <td class="code"><pre><span class="line">[root<span class="property">@centos</span> ~]<span class="comment"># sh a.sh </span></span><br><span class="line">feel<span class="property">@google</span><span class="string">&apos;s password:</span></span><br></pre></td>
                    </tr>
                  </table>
                </figure>
              </p>
              <p> &#x5728;&#x8FDC;&#x7A0B;&#x673A;&#x5668;&#x4E0A;&#x67E5;&#x770B;&#x7AEF;&#x53E3;&#xFF0C;&#x53EF;&#x77E5;&#x5DF2;&#x7ECF;&#x88AB;&#x76D1;&#x542C;&#x4E86; </p>
              <p>
                <figure class="highlight cpp">
                  <table>
                    <tr>
                      <td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td>
                      <td class="code"><pre><span class="line">[feel@cloud ~]$ sudo  netstat  -tanpl |grep <span class="number">19999</span></span><br><span class="line">tcp        <span class="number">0</span>      <span class="number">0</span> <span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">19999</span>             <span class="number">0.0</span><span class="number">.0</span><span class="number">.0</span>:*                   LISTEN      <span class="number">6109</span>/sshd           </span><br><span class="line">tcp        <span class="number">0</span>      <span class="number">0</span> ::<span class="number">1</span>:<span class="number">19999</span>                   :::*                        LISTEN      <span class="number">6109</span>/sshd</span><br></pre></td>
                    </tr>
                  </table>
                </figure>
              </p>
              <p> &#x90A3;&#x4E48;&#x5C31;&#x8FD9;&#x6837;&#x5C31;&#x6210;&#x529F;&#x4E86;&#x3002;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x5411;&#x767B;&#x5165;&#x8FDC;&#x7A0B;&#x673A;&#x5668;&#x7684;&#x65B9;&#x5F0F;&#x767B;&#x5165;&#x6211;&#x4EEC;&#x5C40;&#x57DF;&#x7F51;&#x90A3;&#x53F0;&#x670D;&#x52A1;&#x5668;&#x4E86;
              </p>
              <p>
                <figure class="highlight armasm">
                  <table>
                    <tr>
                      <td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td>
                      <td class="code"><pre><span class="line">[feel<span class="comment">@cloud ~]$ ssh  -p  19999   root@localhost</span></span><br><span class="line"><span class="label">root</span><span class="comment">@localhost&apos;s password: </span></span><br><span class="line"><span class="label">Last</span> login: Sun Oct <span class="number">18</span> <span class="number">01</span>:<span class="number">52</span>:<span class="number">57</span> <span class="number">2015</span> from localhost</span><br><span class="line">[root<span class="comment">@centos ~]# pwd</span></span><br><span class="line">/root</span><br><span class="line">[root<span class="comment">@centos ~]# ifconfig</span></span><br><span class="line"><span class="label">eth0</span>      Link encap:Ethernet  HWaddr <span class="number">00</span>:<span class="number">0</span>C:<span class="number">29</span>:<span class="literal">F0</span>:EB:AE  </span><br><span class="line">          inet <span class="keyword">addr:192.168.1.100 </span> <span class="keyword">Bcast:192.168.1.255 </span> Mask:<span class="number">255</span>.<span class="number">255</span>.<span class="number">255</span>.<span class="number">0</span></span><br><span class="line">          inet6 <span class="keyword">addr: </span>fe80::<span class="number">20</span>c:<span class="number">29</span>ff:fef0:ebae/<span class="number">64</span> Scope:Link</span><br><span class="line">          UP <span class="keyword">BROADCAST </span>RUNNING <span class="keyword">MULTICAST </span> MTU:<span class="number">1500</span>  Metric:<span class="number">1</span></span><br><span class="line">          RX packets:<span class="number">10482</span> errors:<span class="number">0</span> dropped:<span class="number">0</span> overruns:<span class="number">0</span> frame:<span class="number">0</span></span><br><span class="line">          TX packets:<span class="number">5908</span> errors:<span class="number">0</span> dropped:<span class="number">0</span> overruns:<span class="number">0</span> carrier:<span class="number">0</span></span><br><span class="line"><span class="label">          collisions:</span><span class="number">0</span> txqueuelen:<span class="number">1000</span> </span><br><span class="line">          RX <span class="keyword">bytes:10781447 </span>(<span class="number">10</span>.<span class="number">2</span> MiB)  TX <span class="keyword">bytes:526988 </span>(<span class="number">514</span>.<span class="number">6</span> KiB)</span><br><span class="line"></span><br><span class="line"><span class="label">lo</span>        Link encap:Local Loopback  </span><br><span class="line">          inet <span class="keyword">addr:127.0.0.1 </span> Mask:<span class="number">255</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">0</span></span><br><span class="line">          inet6 <span class="keyword">addr: </span>::<span class="number">1</span>/<span class="number">128</span> Scope:Host</span><br><span class="line">          UP LOOPBACK RUNNING  MTU:<span class="number">16436</span>  Metric:<span class="number">1</span></span><br><span class="line">          RX packets:<span class="number">550</span> errors:<span class="number">0</span> dropped:<span class="number">0</span> overruns:<span class="number">0</span> frame:<span class="number">0</span></span><br><span class="line">          TX packets:<span class="number">550</span> errors:<span class="number">0</span> dropped:<span class="number">0</span> overruns:<span class="number">0</span> carrier:<span class="number">0</span></span><br><span class="line"><span class="label">          collisions:</span><span class="number">0</span> txqueuelen:<span class="number">0</span> </span><br><span class="line">          RX <span class="keyword">bytes:64483 </span>(<span class="number">62</span>.<span class="number">9</span> KiB)  TX <span class="keyword">bytes:64483 </span>(<span class="number">62</span>.<span class="number">9</span> KiB)</span><br></pre></td>
                    </tr>
                  </table>
                </figure>
              </p>
              <p> &#x81F3;&#x6B64;&#x4F7F;&#x7528;&#x6210;&#x529F;&#xFF01;</p>

            </div>
            <footer>




              <div class="clearfix"></div>
            </footer>
          </div>
        </article>

        <article class="post">

          <div class="post-content">
            <header>

              <div class="icon"></div>
              <time datetime="2015-12-12T18:57:09.000Z"><a href="/2015/12/13/修改linux时区/">2015-12-13</a></time>

              <h1 class="title"><a href="/2015/12/13/修改linux时区/">修改 linux 时区</a></h1>
            </header>
            <div class="entry">

              <p>linux &#x7684;&#x65F6;&#x533A;&#x4E3A; UTC &#xFF0C;&#x6211;&#x4EEC;&#x9700;&#x8981;&#x4FEE;&#x6539;&#x4E3A; CST &#x65F6;&#x533A;</p>
              <p>
                <figure class="highlight livecodeserver">
                  <table>
                    <tr>
                      <td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td>
                      <td class="code"><pre><span class="line">yum install  -y ntpdate ntp</span><br><span class="line">service ntpd <span class="built_in">stop</span></span><br><span class="line">service ntpdate <span class="built_in">start</span></span><br><span class="line">chkconfig ntpdate <span class="command"><span class="keyword">on</span></span></span><br></pre></td>
                    </tr>
                  </table>
                </figure>
              </p>
              <p>&lt;!--more--&gt; &#x4FEE;&#x6539;&#x65F6;&#x533A;
                <figure class="highlight groovy">
                  <table>
                    <tr>
                      <td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td>
                      <td class="code"><pre><span class="line"><span class="regexp">/etc/</span>sysconfig/clock</span><br><span class="line"></span><br><span class="line">ZONE=<span class="string">&quot;Asia/Shanghai&quot;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">mv <span class="regexp">/etc/</span>localtime <span class="regexp">/etc/</span>localtime.bak</span><br><span class="line">ln -s <span class="regexp">/usr/</span>share<span class="regexp">/zoneinfo/</span>Asia<span class="regexp">/Shanghai  /</span>etc/localtime</span><br></pre></td>
                    </tr>
                  </table>
                </figure>
              </p>
              <p>&#x5C06;&#x5F53;&#x524D;&#x65F6;&#x95F4;&#x548C;&#x65E5;&#x671F;&#x5199;&#x5165; BIOS&#xFF0C;&#x907F;&#x514D;&#x91CD;&#x542F;&#x540E;&#x5931;&#x6548;</p>
              <p>
                <figure class="highlight">
                  <table>
                    <tr>
                      <td class="gutter"><pre><span class="line">1</span><br></pre></td>
                      <td class="code"><pre><span class="line">hwclock</span><br></pre></td>
                    </tr>
                  </table>
                </figure>
              </p>
              <p>&#x5728;&#x5B9E;&#x9645;&#x5E94;&#x7528;&#x4E2D;&#x53D1;&#x73B0;&#x4E0A;&#x9762;&#x8FD9;&#x79CD;&#x65B9;&#x5F0F;&#xFF0C;&#x4E0D;&#x80FD;&#x5168;&#x90E8;&#x5E94;&#x7528;&#x751F;&#x6548;&#x3002; &#x6700;&#x597D;&#x8FD8;&#x662F;&#x91CD;&#x542F;
                reboot &#x89E3;&#x51B3;&#x3002;
              </p>
              <p>
                <figure class="highlight stylus">
                  <table>
                    <tr>
                      <td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td>
                      <td class="code"><pre><span class="line">yum install  -y ntpdate ntp</span><br><span class="line"></span><br><span class="line">ntpdate asia<span class="class">.pool</span><span class="class">.ntp</span><span class="class">.org</span></span><br></pre></td>
                    </tr>
                  </table>
                </figure>
              </p>
              <p>
                <figure class="highlight groovy">
                  <table>
                    <tr>
                      <td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td>
                      <td class="code"><pre><span class="line"></span><br><span class="line">&#x7CFB;&#x7EDF;&#x65F6;&#x533A;&#x914D;&#x7F6E; </span><br><span class="line">GMT</span><br><span class="line">cp <span class="regexp">/usr/</span>share<span class="regexp">/zoneinfo/</span>GMT  <span class="regexp">/etc/</span>localtime</span><br><span class="line"> &#x518D;&#x628A;  <span class="regexp">/etc/</span>sysconfig/clock  &#x4FEE;&#x6539;&#x6210;&#x5982;&#x4E0B;&#x5185;&#x5BB9; </span><br><span class="line">ZONE=<span class="string">&quot;GMT&quot;</span></span><br><span class="line">UTC=<span class="literal">false</span></span><br><span class="line">ARC=<span class="literal">false</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"> &#x7F8E;&#x4E1C;&#x65F6;&#x95F4; </span><br><span class="line">cp <span class="regexp">/usr/</span>share<span class="regexp">/zoneinfo/</span>Brazil<span class="regexp">/West  /</span>etc/localtime</span><br><span class="line"> &#x518D;&#x628A;  <span class="regexp">/etc/</span>sysconfig/clock  &#x4FEE;&#x6539;&#x6210;&#x5982;&#x4E0B;&#x5185;&#x5BB9; </span><br><span class="line">ZONE=<span class="string">&quot;America/New_York&quot;</span></span><br><span class="line">UTC=<span class="literal">false</span></span><br><span class="line">ARC=<span class="literal">false</span></span><br><span class="line"></span><br><span class="line"> &#x7F8E;&#x4E1C;&#x65F6;&#x95F4; </span><br><span class="line">cp <span class="regexp">/usr/</span>share<span class="regexp">/zoneinfo/</span>America<span class="regexp">/New_York /</span>etc/localtime </span><br><span class="line"> &#x518D;&#x628A;  <span class="regexp">/etc/</span>sysconfig/clock  &#x4FEE;&#x6539;&#x6210;&#x5982;&#x4E0B;&#x5185;&#x5BB9; </span><br><span class="line">ZONE=<span class="string">&quot;America/New_York&quot;</span></span><br><span class="line">UTC=<span class="literal">false</span></span><br><span class="line">ARC=<span class="literal">false</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"> &#x4E2D;&#x56FD;&#x65F6;&#x533A; </span><br><span class="line"><span class="regexp">/usr/</span>share<span class="regexp">/zoneinfo/</span>Asia<span class="regexp">/Hong_Kong   /</span>etc/localtime</span><br><span class="line"> &#x518D;&#x628A;  <span class="regexp">/etc/</span>sysconfig/clock  &#x4FEE;&#x6539;&#x6210;&#x5982;&#x4E0B;&#x5185;&#x5BB9; </span><br><span class="line">ZONE=<span class="string">&quot;Asia/Hong_Kong&quot;</span></span><br><span class="line">UTC=<span class="literal">false</span></span><br><span class="line">ARC=<span class="literal">false</span></span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line"> &#x65F6;&#x95F4;&#x540C;&#x6B65;&#x547D;&#x4EE4; (&#x5F53;&#x7CFB;&#x7EDF;&#x9700;&#x8981;&#x5B89;&#x88C5; ntp &#x5373;&#x53EF;)</span><br><span class="line"><span class="regexp">/usr/</span>sbin/ntpdate -u <span class="number">192.43</span><span class="number">.244</span><span class="number">.18</span> </span><br><span class="line"><span class="regexp">/usr/</span>sbin/ntpdate time.asia.apple.com</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"> &#x6DFB;&#x52A0;&#x540C;&#x6B65;&#x65F6;&#x949F;&#x811A;&#x672C; </span><br><span class="line">crontab -e</span><br><span class="line"> &#x6DFB;&#x52A0;&#x5982;&#x4E0B;&#x884C;&#x5373;&#x53EF;</span><br><span class="line">*<span class="regexp">/5 * * * * /</span>usr<span class="regexp">/sbin/</span>ntpdate -u <span class="number">192.43</span><span class="number">.244</span><span class="number">.18</span> &gt;<span class="regexp">/dev/</span><span class="literal">null</span> <span class="number">2</span>&gt;&amp;<span class="number">1</span></span><br></pre></td>
                    </tr>
                  </table>
                </figure>
              </p>

            </div>
            <footer>




              <div class="clearfix"></div>
            </footer>
          </div>
        </article>

        <article class="post">

          <div class="post-content">
            <header>

              <div class="icon"></div>
              <time datetime="2015-12-05T17:39:51.000Z"><a href="/2015/12/06/动态生成密码/">2015-12-06</a></time>

              <h1 class="title"><a href="/2015/12/06/动态生成密码/">动态生成密码</a></h1>
            </header>
            <div class="entry">

              <p> &#x6709;&#x65F6;&#x5019;&#xFF0C;&#x6211;&#x4EEC;&#x5728;&#x7BA1;&#x7406;&#x670D;&#x52A1;&#x5668;&#x7684;&#x65F6;&#x5019;&#x7ECF;&#x5E38;&#x66F4;&#x6362;&#x5BC6;&#x7801;&#xFF0C;&#x4E0B;&#x9762;&#x6709;&#x51E0;&#x79CD;&#x52A8;&#x6001;&#x751F;&#x6210;&#x5BC6;&#x7801;&#x7684;&#x65B9;&#x5F0F;
              </p>
              <p>&lt;!--more--&gt;</p>
              <p>
                <figure class="highlight bash">
                  <table>
                    <tr>
                      <td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td>
                      <td class="code"><pre><span class="line"><span class="shebang">#!/bin/bash </span></span><br><span class="line"><span class="keyword">if</span> [<span class="variable">$#</span> <span class="operator">-lt</span> <span class="number">1</span> ];</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;bash  8 (&#x5BC6;&#x7801;&#x957F;&#x5EA6;)&quot;</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">cat /dev/urandom | head -<span class="number">1</span> | md5 |base64 | head -c <span class="variable">$1</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;&quot;</span></span><br><span class="line">date |md5 |base64  |head -c <span class="variable">$1</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;&quot;</span></span><br><span class="line">date +%s |shasum |base64 |head  -c <span class="variable">$1</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;&quot;</span></span><br><span class="line">openssl rand -base64 <span class="number">256</span> |head -c  <span class="variable">$1</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;&quot;</span></span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td>
                    </tr>
                  </table>
                </figure>
              </p>
              <p> &#x5982;&#x6211;&#x4EEC;&#x8981;&#x751F;&#x6210; 8 &#x4F4D;&#x7684;&#x5BC6;&#x7801;&#xFF1A; &#x6267;&#x884C;
                <figure class="highlight stylus">
                  <table>
                    <tr>
                      <td class="gutter"><pre><span class="line">1</span><br></pre></td>
                      <td class="code"><pre><span class="line">./genpasswd<span class="class">.sh</span> <span class="number">8</span></span><br></pre></td>
                    </tr>
                  </table>
                </figure>
              </p>
              <p> &#x8F93;&#x51FA; </p>
              <p>
                <figure class="highlight nginx">
                  <table>
                    <tr>
                      <td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td>
                      <td class="code"><pre><span class="line"><span class="title">ZmI3N2E3</span></span><br><span class="line">ZjA1YjNi</span><br><span class="line">OTY5ZWE4</span><br><span class="line">GcBj1ikc</span><br></pre></td>
                    </tr>
                  </table>
                </figure>
              </p>

            </div>
            <footer>




              <div class="clearfix"></div>
            </footer>
          </div>
        </article>

        <article class="post">

          <div class="post-content">
            <header>

              <div class="icon"></div>
              <time datetime="2015-09-04T08:46:48.000Z"><a href="/2015/09/04/nginx信号量/">2015-09-04</a></time>

              <h1 class="title"><a href="/2015/09/04/nginx信号量/">nginx 信号量</a></h1>
            </header>
            <div class="entry">

              <p> &#x5728;&#x6211;&#x4EEC;&#x4F7F;&#x7528; nginx , &#x6211;&#x4EEC;&#x591A;&#x591A;&#x5C11;&#x5C11;&#x90FD;&#x9700;&#x8981;&#x4F7F;&#x7528; nginx &#x7684;&#x4FE1;&#x53F7;&#x6765;&#x63A7;&#x5236; nginx</p>
              <p>&lt;!--more--&gt;
                <figure class="highlight gherkin">
                  <table>
                    <tr>
                      <td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td>
                      <td class="code"><pre><span class="line"></span><br><span class="line">|<span class="string"> ERM, INT   </span>|<span class="string">  Quick shutdown    &#x7ACB;&#x5373;&#x7ED3;&#x675F;&#x8FDB;&#x7A0B;                                                                       </span><br><span class="line">      </span><br><span class="line"></span>|<span class="string">  QUIT      </span>|<span class="string"> Graceful shutdown  &#x4F18;&#x96C5;&#x7684;&#x5173;&#x95ED;&#x8FDB;&#x7A0B;, &#x5373;&#x7B49;&#x8BF7;&#x6C42;&#x7ED3;&#x675F;&#x540E;&#x518D;&#x5173;&#x95ED;  </span><br><span class="line"> </span><br><span class="line"></span>|<span class="string">  HUP       </span>|<span class="string">  Configuration reload ,Start the new  worker processes with  </span><br><span class="line">             </span>|<span class="string"> a  new configuration Gracefully shutdown the old worker processes </span><br><span class="line">             </span>|<span class="string"> &#x6539;&#x53D8;&#x914D;&#x7F6E;&#x6587;&#x4EF6;, &#x5E73;&#x6ED1;&#x7684;&#x91CD;&#x8BFB;&#x914D;&#x7F6E;&#x6587;&#x4EF6; &#xFF08;&#x5F53;&#x6211;&#x4EEC;&#x4FEE;&#x6539;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x7684;&#x65F6;&#x5019;&#x53EF;&#x4EE5;&#x5E73;&#x6ED1;&#x5347;&#x7EA7;&#xFF0C;&#x91CD;&#x542F;&#xFF0C;&#x4E2D;&#x95F4;&#x8FC7;&#x7A0B;&#x4E0D;&#x662F;&#x7ACB;&#x5373;&#x751F;&#x6548; </span><br><span class="line"></span><br><span class="line"></span>|<span class="string">  USR1      </span>|<span class="string">  Reopen the log files &#x91CD;&#x8BFB;&#x65E5;&#x5FD7;, &#x5728;&#x65E5;&#x5FD7;&#x6309;&#x6708; / &#x65E5;&#x5206;&#x5272;&#x65F6;&#x6709;&#x7528; &#xFF08;&#x5728;&#x4F7F;&#x7528;&#x65E5;&#x5FD7;&#x5206;&#x9694;&#x65F6;&#xFF0C;&#x4E0D;&#x80FD;&#x7B80;&#x5355;&#x7684;&#x6539;&#x540D;&#x505A;&#x5907;&#x4EFD;  </span><br><span class="line">      </span><br><span class="line"></span>|<span class="string">  USR2       </span>|<span class="string">  Upgrade Executable on the fly &#x5E73;&#x6ED1;&#x7684;&#x5347;&#x7EA7;             </span><br><span class="line"> </span><br><span class="line"></span>|<span class="string">  WINCH     </span>|<span class="string">  Gracefully shutdown the worker processes  &#x4F18;&#x96C5;&#x5173;&#x95ED;&#x65E7;&#x7684;&#x8FDB;&#x7A0B; (&#x914D;&#x5408; USR2 &#x6765;&#x8FDB;&#x884C;&#x5347;&#x7EA7;)</span></span><br></pre></td>
                    </tr>
                  </table>
                </figure>
              </p>
              <h3 id="&#x5177;&#x4F53;&#x8BED;&#x6CD5;"> &#x5177;&#x4F53;&#x8BED;&#x6CD5;:</h3>
              <p>
                <figure class="highlight sql">
                  <table>
                    <tr>
                      <td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td>
                      <td class="code"><pre><span class="line"></span><br><span class="line"><span class="operator"><span class="keyword">Kill</span>  - &#x4FE1;&#x53F7;&#x9009;&#x9879; nginx &#x7684;&#x4E3B;&#x8FDB;&#x7A0B;&#x53F7; </span><br><span class="line"><span class="keyword">Kill</span>  -HUP <span class="number">4873</span></span><br><span class="line"> </span><br><span class="line"><span class="keyword">Kill</span>  - &#x4FE1;&#x53F7;&#x63A7;&#x5236; <span class="string">`cat /xxx/path/log/nginx.pid`</span></span><br><span class="line"> </span><br><span class="line"><span class="keyword">Kill</span>   -USR1 <span class="string">`cat /xxx/path/log/nginx.pid`</span></span></span><br></pre></td>
                    </tr>
                  </table>
                </figure>
              </p>

            </div>
            <footer>




              <div class="clearfix"></div>
            </footer>
          </div>
        </article>

        <article class="post">

          <div class="post-content">
            <header>

              <div class="icon"></div>
              <time datetime="2015-09-03T19:38:05.000Z"><a href="/2015/09/04/nginx-403-forbidden/">2015-09-04</a></time>

              <h1 class="title"><a href="/2015/09/04/nginx-403-forbidden/">nginx 403 forbidden</a></h1>
            </header>
            <div class="entry">

              <p>nginx 403 forbidden &#x4E09;&#x79CD;&#x539F;&#x56E0; &#x5F15;&#x8D77; nginx 403 forbidden &#x6709;&#x4E09;&#x79CD;&#x539F;&#x56E0;&#xFF0C;&#x4E00;&#x662F;&#x7F3A;&#x5C11;&#x7D22;&#x5F15;&#x6587;&#x4EF6;&#xFF0C;&#x4E8C;&#x6743;&#x9650;&#x95EE;&#x9898;&#xFF0C;&#x4E09;&#x662F;
                selinux
              </p>
              <p>&lt;!--more--&gt;</p>
              <h4 id="1&#x7F3A;&#x5C11;-indexhtml-&#x6216;&#x8005;-indexphp-&#x6587;&#x4EF6;">1&#xFF0C;&#x7F3A;&#x5C11; index.html &#x6216;&#x8005; index.php &#x6587;&#x4EF6; </h4>
              <p>
                <figure class="highlight nginx">
                  <table>
                    <tr>
                      <td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td>
                      <td class="code"><pre><span class="line"></span><br><span class="line"><span class="title">server</span> {  </span><br><span class="line"> <span class="title">listen</span>       <span class="number">80</span>;  </span><br><span class="line"> <span class="title">server_name</span>  localhost;  </span><br><span class="line"> <span class="title">index</span>  index.php index.html;  </span><br><span class="line"> <span class="title">root</span>  /home/feel/www;</span><br></pre></td>
                    </tr>
                  </table>
                </figure>
              </p>
              <p> &#x5982;&#x679C;&#x5728; /home/zhang/www &#x4E0B;&#x9762;&#x6CA1;&#x6709; index.php,index.html &#x7684;&#x65F6;&#x5019;&#xFF0C;&#x76F4;&#x63A5;&#x8BBF;&#x95EE;&#x57DF;&#x540D;&#xFF0C;&#x627E;&#x4E0D;&#x5230;&#x6587;&#x4EF6;&#xFF0C;&#x4F1A;&#x62A5;
                403 forbidden&#x3002;&#x4F8B;&#x5982;&#xFF1A;&#x4F60;&#x8BBF;&#x95EE; www.test.com &#x800C;&#x8FD9;&#x4E2A;&#x57DF;&#x540D;&#xFF0C;&#x5BF9;&#x5E94;&#x7684; root &#x6307;&#x5B9A;&#x7684;&#x7D22;&#x5F15;&#x6587;&#x4EF6;&#x4E0D;&#x5B58;&#x5728;&#x3002;</p>
              <h4 id="2&#x6743;&#x9650;&#x95EE;&#x9898;">2&#xFF0C;&#x6743;&#x9650;&#x95EE;&#x9898; </h4>
              <p> &#x56E0;&#x4E3A;&#x6743;&#x9650;&#x95EE;&#x9898;&#x5F15;&#x8D77;&#x7684; 403&#xFF0C;&#x4E2A;&#x4EBA;&#x89C9;&#x5F97;&#x6BD4;&#x8F83;&#x96BE;&#x67E5;&#x627E;&#xFF0C;&#x56E0;&#x4E3A;&#x4E00;&#x65F6;&#x60F3;&#x4E0D;&#x8D77; </p>
              <p>
                <figure class="highlight nginx">
                  <table>
                    <tr>
                      <td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td>
                      <td class="code"><pre><span class="line"><span class="title">server</span> {  </span><br><span class="line"> <span class="title">listen</span>       <span class="number">80</span>;  </span><br><span class="line"> <span class="title">server_name</span>  localhost;  </span><br><span class="line"> <span class="title">index</span>  index.php index.html;  </span><br><span class="line"> <span class="title">root</span>  /home/feel/www;</span><br></pre></td>
                    </tr>
                  </table>
                </figure>
              </p>
              <p> &#x6211;&#x628A; web &#x76EE;&#x5F55;&#x653E;&#x5728;&#x7528;&#x6237;&#x7684;&#x6240;&#x5C5E;&#x76EE;&#x5F55;&#x4E0B;&#x9762;&#xFF0C;nginx &#x7684;&#x542F;&#x52A8;&#x7528;&#x6237;&#x9ED8;&#x8BA4;&#x662F; nginx &#x7684;&#xFF0C;&#x6240;&#x4EE5;&#x5BF9;&#x76EE;&#x5F55;&#x6839;&#x672C;&#x6CA1;&#x6709;&#x8BFB;&#x7684;&#x6743;&#x9650;&#xFF0C;&#x8FD9;&#x6837;&#x5C31;&#x4F1A;&#x62A5;
                403 &#x9519;&#x8BEF;&#x4E86;&#x3002;&#x8FD9;&#x4E2A;&#x65F6;&#x5019;&#xFF0C;&#x628A; web &#x76EE;&#x5F55;&#x7684;&#x6743;&#x9650;&#x6539;&#x5927;&#xFF0C;&#x6216;&#x8005;&#x662F;&#x628A; nginx &#x7684;&#x542F;&#x52A8;&#x7528;&#x6237;&#x6539;&#x6210;&#x76EE;&#x5F55;&#x7684;&#x6240;&#x5C5E;&#x7528;&#x6237;&#xFF0C;&#x91CD;&#x8D77;&#x4E00;&#x4E0B;&#x5C31;&#x80FD;&#x89E3;&#x51B3;&#x3002;</p>
              <h4 id="3-&#x6CA1;&#x6709;&#x5173;&#x95ED;-selinux">3. &#x6CA1;&#x6709;&#x5173;&#x95ED; selinux</h4>
              <p> &#x8FD9;&#x4E2A;&#x56F0;&#x6270;&#x4E86;&#x6211;&#x597D;&#x4E45;&#xFF0C;&#x6700;&#x540E;&#x6211;&#x5C1D;&#x8BD5;&#x5173;&#x95ED; selinux. &#x91CD;&#x542F;&#x670D;&#x52A1;&#x5668;&#x3002;&#x6700;&#x540E;&#x89E3;&#x51B3;&#x4E86;&#xFF01;&#xFF01;&#xFF01;</p>
              <p>
                <figure class="highlight stylus">
                  <table>
                    <tr>
                      <td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td>
                      <td class="code"><pre><span class="line">sed  -<span class="tag">i</span> <span class="string">&apos;s/SELINUX=enforcing/SELINUX=disabled/g&apos;</span> /etc/selinux/config</span><br><span class="line">sed  -<span class="tag">i</span> <span class="string">&apos;/SELINUX=disabled/s/^#*//&apos;</span>  /etc/selinux/config</span><br></pre></td>
                    </tr>
                  </table>
                </figure>
              </p>

            </div>
            <footer>




              <div class="clearfix"></div>
            </footer>
          </div>
        </article>


        <nav id="pagination">


          <a href="/page/2/" class="alignright next">下一页</a>

          <div class="clearfix"></div>
        </nav>
      </div>
    </div>
    <aside id="sidebar" class="alignright">
      <div class="widget tag">
        <h3 class="title">最新文章</h3>
        <ul class="entry">

          <li>
            <a href="/2016/04/03/CGlib实现动态代理/">CGlib 实现动态代理</a>
          </li>

          <li>
            <a href="/2016/03/08/linux-交换分区/">linux  交换分区</a>
          </li>

          <li>
            <a href="/2016/01/02/ssl双向认证/">ssl 双向认证</a>
          </li>

          <li>
            <a href="/2015/12/27/autossh隧道搭建私服/">autossh 隧道搭建私服</a>
          </li>

          <li>
            <a href="/2015/12/13/修改linux时区/">修改 linux 时区</a>
          </li>

        </ul>
      </div>

      <div class="widget tag">
        <h3 class="title">分类</h3>
        <ul class="entry">

          <li><a href="/categories/bigtata/">bigdata</a><small>2</small></li>

          <li><a href="/categories/css3/">css3</a><small>2</small></li>

          <li><a href="/categories/java/">java</a><small>1</small></li>

          <li><a href="/categories/linux/">linux</a><small>5</small></li>

          <li><a href="/categories/nginx/">nginx</a><small>1</small></li>

          <li><a href="/categories/nginx常用错误/">nginx常用错误</a><small>1</small></li>

          <li><a href="/categories/tool/">tool</a><small>1</small></li>

          <li><a href="/categories/web/">web</a><small>2</small></li>

        </ul>
      </div>

      <div class="widget tag">
        <h3 class="title">标签</h3>
        <ul class="entry">

          <li><a href="/tags/bigtata/">bigdata</a><small>2</small></li>

          <li><a href="/tags/css3/">css3</a><small>2</small></li>

          <li><a href="/tags/java/">java</a><small>1</small></li>

          <li><a href="/tags/linux/">linux</a><small>5</small></li>

          <li><a href="/tags/nginx/">nginx</a><small>2</small></li>

          <li><a href="/tags/nginx信号量/">nginx信号量</a><small>1</small></li>

          <li><a href="/tags/sqoop/">sqoop</a><small>1</small></li>

          <li><a href="/tags/tool/">tool</a><small>1</small></li>

          <li><a href="/tags/web/">web</a><small>3</small></li>

          <li><a href="/tags/web前端/">web前端</a><small>1</small></li>

          <li><a href="/tags/前端样式框架/">前端样式框架</a><small>1</small></li>

          <li><a href="/tags/样式/">样式</a><small>1</small></li>

        </ul>
      </div>
    </aside>
    <div class="clearfix"></div>
  </div>
  <footer id="footer" class="inner">
    <div class="alignleft">

      &copy; 2016 feel

    </div>
    <div class="clearfix"></div>
  </footer>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>
  <script src="/js/jquery.imagesloaded.min.js"></script>
  <script src="/js/gallery.js"></script>




  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>
  <script type="text/javascript">
    (function($) {
      $('.fancybox').fancybox();
    })(jQuery);
  </script>
</body>

